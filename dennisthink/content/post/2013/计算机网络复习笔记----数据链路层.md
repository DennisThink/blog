---
title: "计算机网络复习笔记----数据链路层"
date: 2012-09-15T21:38:52+08:00
lastmod: 2012-09-15T21:41:52+08:00
weight: 50
# you can close something for this content if you open it in config.toml.
tags: ["from-csdn"]
comment: true
mathjax: false
---

一, 数据链路层使用的通信类型：

(1), 点对点通信，这种信道使用一对一的点对点通信

(2), 广播信道，这种信道使用一对多的广播通信方式，因此过程比较复杂。

二，数据链路层的基本概念。

   链路：就是从一个结点到相邻结点的一段物理线路，而中间没有任何其他的交换结点。

   数据链路：链路加上一些协议和实现这些协议的软件和硬件就构成了数据链路。

   帧：点对点信道的数据链路层的协议数据单元。

   网络层协议数据单元就是 IP 数据报

三, 数据链路层要解决的三个基本问题。

  (1), 封装成帧

     封装成帧就是在一段数据的前后分别添加首部和尾部，这样就构成了一个帧。

     当数据是由可打印的 ASCII 码组成的文本文件时，帧定界可以使用特殊的帧定界符。

(2), 透明传输：

当传送的帧是用文本文件组成的帧时 (文本文件的字符都是从键盘上可以输入的)，其数据部分显然不会出现像 SOH 或 EOT 这样的帧定界控制字符，可见，不管从键盘上输入什么字符，都可以放在这样的帧中传输过去，因此这样的传输就是透明传输。

  字节填充 (字符填充)：发送端的数据链路层在数据中出现控制字符“SOH” 或者 “EOT” 的前面插入一个转义字符，“ESC”（其十六进制编码为 1B）。而在接收端的数据链路层将数据送往网络层之前删除这个插入的转义字符。这种方法就称为字节填充或者字符填充。

(3)，错检测

比特差错：比特在传输过程中可能出现差错，1 可能变成 0,0 可能变成 1，这就叫做比特差错。

误码率：传输错误的比特占所传输比特总数的比特率称为误码率。

帧检验序列：为了进行检错而添加的冗余码常称为帧检验序列。

无差错接收：凡是接收端数据链路层接受的帧，我们都能以非常接近于 1 的概率认

为这些帧在传输过程中没有产生差错。

四，差错的种类

  (1), 基本的比特差错

(2), 出现了帧丢失，帧重复和帧失序

假设发送了 [#1]--[#2]--[#3] 三个帧

帧丢失：收到 [#1]----[#3] 丢失[#2]

帧重复：收到 [#1]--[#2]---[#2]----[#3] 收到两个[#2]

帧失序：收到 [#1]---[#3]---[#2] 后发送的帧先到达了接收端。

五，点对点的通信的特点

 (1), 简单

(2)，封装成帧

(3)，透明性

(4)，多种网络协议，(能在同一条物理线路上同时支持多种网络协议)

(5)，多种类型链路

(6)，差错检测，(接收到差错帧，立即丢弃)

(7)，检测连接状态

(8)，最大传输单元。MTU 是数据链路层可以载荷的数据部分的最大长度，不是帧的总长度。

(9) 网络地址协商

(10), 数据压缩协商。

六，PPP 不需要实现的功能：
(1), 纠错. PPP 只进行检错，不进行纠错，PPP 协议不是可靠的传输协议。

(2)，流量控制

(3)，序号

(4)，多点线路

(5)，半双工或者单工

七，协议的组成

(1), 一个将 IP 数据报封装到串行链路的方法。

(2)，一个用来建立、配置和测试数据链路连接的链路控制协议 LCP。

(3)，一套网络控制协议，其中每一个协议支持不同的网络层协议。

八，PPP 协议的帧格式

1，  字节填充

2，  零比特填充

在发送端，先扫描整个信息字段 (通常用硬件实现，但也可用软件实现，只是会慢些)，只要发现有 5 个连续的 1，则立即填入一个 0.

九，PPP 协议的工作状态

十，使用广播信道的数据链路层

   局域网的特点：网络为一个单位所拥有，且地理范围和站点数目均有限。

   局域网的工作的层次跨越了数据链路层和物理层。

共享信道的方法：(1), 静态划分信道。

                (2), 动态媒体接入。(随机接入，受控接入)

十一，为了通信的方便以太网采取的措施：

1，采用较为灵活的无连接的方式，即不必先建立连接就可以直接发送数据。

适配器对发送的数据帧不进行编号，也不要求对方发挥确认。以太网提供的服务是不可靠的交付，即尽最大努力交付。有差错的帧是否重传由上层来决定。以太网并不知道这是重传帧，而是当做新的数据发送。

2，以太网发送的数据都使用曼彻斯特编码的信号，通过电平的变化来识别帧的开始和结束. 在同一时间值允许一台计算机发送信息。

十二，以太网采用的协议 ----- 载波监听多点接入 / 碰撞检测：

多点接入：说明这是总线型网络，许多计算机以多点接入的方式连接在一根总线上，协议的实质是” 载波监听” 和” 碰撞检测”.

载波监听：就是 “发送前先监听”，即每个站点在发送数据之前先要检测一下总线上是否有其他站在发送数据，如果有则暂时不要发送数据。要等待信道变为空闲时再发送数据。其实总线上并没有什么载波，载波监听就是用电子技术检测总线上有没有其他计算机发送的数据信号。

碰撞检测：就是 “边发送边监听”. 即适配器边发送数据边检测信道上的信号电压的变化情况，以便判断自己在发送数据时其他站是否也在发送数据。

注意：1，每一个站在自己发送数据之后的一小段时间，存在着遭遇碰撞的可能性。

2，以太网的端到端的往返时间 2T 称为争用期，争用期也称为碰撞窗口。

3，经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会碰撞。

4，以太网使用截断二进制指数避退算法解决碰撞问题。

5，以太网还规定了帧间最小间隔为 9.6μs，相当于 96 比特的时间。这样做事为了是刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。

十二，使用集线器的星形拓扑

10BASE-T 双绞线以太网的出现，是局域网发展史上的一个非常重要的里程碑。

十三, 集线器的特点

(1), 使用集线器的以太网在逻辑上仍是一个总线网，个站共享逻辑上的总线，使用的还是 CSMA/CD 协议，在同一时刻只允许一个站点发送数据。

(2)，一个集线器有多个接口，(8—16 个)，一个集线器很像一个多接口的转发器。

(3)，集线器工作在物理层，它的每个接口只是简单的转发比特，不进行碰撞检测。

(4)，集线器采用了专门的芯片，进行自适应串音回波抵消。

十四，适配器的过滤功能：网络适配器在收到 MAC 帧以后，先将帧中的目的地址和本机的 MAC 地址进行比较，如果相同则接收下，交给上层，否则丢弃。

十五，本地接收到的帧有三种：

1，单播帧 (一对一)：即收到的帧的 MAC 地址和本机的 MAC 地址一样。

2，多播帧 (一对多)：发送给本地局域网上一部分站点的帧

3，广播帧 (一对全部)：发送给本地局域网上的所有站点的帧。

十六，MAC 帧的格式

第三个字段是 2 个字节的类型字段，用来标识上一层使用的是什么协议，以便把收到的数据交给上层的这个协议。接收方通过电平的变化来识别帧的开始和结束。

十七，无效的 MAC 帧：

(1) 帧的长度不是整数个字节。

(2) 用收到的帧检验序列 FCS 查出有差错。

(3) 收到的帧的 MAC 客户数据段的长度不在 46---1500 字节之间。

十八，在物理层扩展以太网:

1. 将两个网段用一个转发器连接起来

2. 使用调制解调器和光纤

3. 使用多个集线器，可以连接成覆盖范围更大的多级星形结构的以太网

十九，在数据链路层扩展以太网

在数据链路层扩展以太网要使用网桥，网桥工作在数据链路层，它根据 MAC 帧的目的地址对收到的帧进行转发和过滤。

1，网桥的内部结构

两个以太网通过网桥连接起来后，就称为一个覆盖范围更大的以太网，而原来的每一个以太网就称为一个网段。

网桥依靠转发表来转发帧，转发表也叫做转发数据库或者路由目录。

2, 使用网桥的好处

(1) 过滤通信量，增大吞吐量

(2) 扩大了物理范围

(3) 提高了可靠性

3，  可互连不同物理层，不同 MAC 子层和不同速率的以太网

缺点：

1，  增加了时延，

2，  没有流量控制功能

3，  网桥只适合于用户不太多 (不超过几百个) 和通信量不太大的以太网，否则有时还会因为传播过多的广播信息而产生网络拥塞，这就是所谓的广播风暴。

二十，透明网桥：以太网上的站点并不知道所发送的帧将经过哪几个网桥，以太网上的站点都看不见以太网上的网桥。它还是一种即插即用设备。

二十一，源路由网桥：由发送帧的源站负责路由选择的网桥问世了，这就是源路由网桥。

        源路由网桥在发送帧时，把详细的路由信息放在帧的首部。

二十二，多接口网桥：以太网交换机实质上就是一个多接口网桥，

特点：1，以太网交换机的每一个接口都直接与一个单个主机或者集线器相连，并且工作在全双工的方式下，

             2，交换机能同时连通许多对的接口，使每一对相互通信的主机都能像独占通信媒体一样，无碰撞的传输数据。

对于一个拥有 N 接口的总容量为 N*10Mb/S, 这就是交换机的最大优点。

